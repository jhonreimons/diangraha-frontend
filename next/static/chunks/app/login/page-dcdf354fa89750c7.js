(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{373:(e,r,t)=>{"use strict";t.d(r,{JR:()=>o,eo:()=>a});let o="/api",a="https://diangraha-be-production.up.railway.app"},3575:(e,r,t)=>{Promise.resolve().then(t.bind(t,5404))},5404:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});var o=t(5155),a=t(2115),n=t(9497),s=t(2619),l=t.n(s);function i(){let[e,r]=(0,a.useState)({username:"",password:""}),{login:t,loading:s,error:i}=(0,n.A)(),c=async r=>{r.preventDefault();try{await t(e),window.location.href="/dashboard"}catch(e){console.error("Login error:",e)}},d=t=>{r({...e,[t.target.name]:t.target.value})};return(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-orange-50 px-4",children:(0,o.jsxs)("div",{className:"w-full max-w-sm bg-white rounded-xl shadow-lg p-8",children:[(0,o.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[(0,o.jsx)("div",{className:"bg-blue-600 text-white rounded-full w-16 h-16 flex items-center justify-center text-lg font-bold",children:"DGE"}),(0,o.jsx)("h2",{className:"mt-4 text-lg font-semibold text-gray-800",children:"Admin Login"}),(0,o.jsx)("p",{className:"text-sm text-gray-500",children:"Please enter your credentials"})]}),(0,o.jsxs)("form",{onSubmit:c,className:"space-y-5",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,o.jsx)("input",{type:"text",id:"username",name:"username",value:e.username,onChange:d,required:!0,placeholder:"Enter username",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 focus:outline-none transition-all text-gray-600 placeholder-gray-500"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,o.jsx)("input",{type:"password",id:"password",name:"password",value:e.password,onChange:d,required:!0,placeholder:"Enter password",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 focus:outline-none transition-all text-gray-600 placeholder-gray-500"})]}),i&&(0,o.jsx)("div",{className:"text-red-600 text-sm text-center bg-red-50 p-2 rounded",children:"Username or password incorrect"}),(0,o.jsx)("button",{type:"submit",disabled:s,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Logging in...":"Login"}),(0,o.jsx)("div",{className:"text-center mt-4",children:(0,o.jsx)(l(),{href:"/",className:"text-sm text-blue-600 hover:text-blue-800",children:"â† Back to Homepage"})})]})]})})}},7621:(e,r,t)=>{"use strict";t.d(r,{R2:()=>s,dn:()=>n});var o=t(373);async function a(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let t="".concat(o.JR).concat(e),a=localStorage.getItem("token"),n={...r,headers:{"Content-Type":"application/json",...a&&{Authorization:"Bearer ".concat(a)},...r.headers}},s=await fetch(t,n),l=await s.text(),i=null;if(l)try{i=JSON.parse(l)}catch(e){throw console.error("Invalid JSON response:",l),Error("Invalid JSON response")}if(!s.ok){if(401===s.status)throw localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login",Error("Session expired");let e=(null==i?void 0:i.message)||"API Error: ".concat(s.status);throw Error(e)}return i}catch(e){throw e instanceof Error?e:Error("Network error")}}let n={fetchAchievements:async()=>{try{let e=await fetch("".concat(o.eo,"/api/achievements"),{method:"GET",headers:{accept:"*/*"}});if(!e.ok)throw Error("Failed to fetch achievements: ".concat(e.status));return await e.json()}catch(e){throw e instanceof Error?e:Error("Network error")}}},s={login:async e=>{try{let r=await fetch("".concat(o.eo,"/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await r.text(),a=null;if(t)try{a=JSON.parse(t)}catch(e){throw console.error("Invalid JSON from login API:",t),Error("Invalid JSON from login API")}if(!r.ok){let e=(null==a?void 0:a.message)||"Login failed: ".concat(r.status);throw Error(e)}return a}catch(e){throw e instanceof Error?e:Error("Network error")}},logout:async()=>a("/auth/logout",{method:"POST"})}},9497:(e,r,t)=>{"use strict";t.d(r,{A:()=>n});var o=t(2115),a=t(7621);let n=()=>{let[e,r]=(0,o.useState)(!1),[t,n]=(0,o.useState)(null),[s,l]=(0,o.useState)(!1),i=()=>{let e=localStorage.getItem("token");if(!e)return!0;try{let r=JSON.parse(atob(e.split(".")[1])),t=1e3*r.exp;return Date.now()>t}catch(e){return!0}};return{login:async e=>{try{r(!0),n(null),l(!1);let t=await a.R2.login(e);return t.token&&(localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t))),t}catch(e){throw n(e instanceof Error?e.message:"Login failed"),e}finally{r(!1)}},logout:()=>{l(!1),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"},isTokenExpired:i,handleExpiration:()=>{i()&&l(!0)},isExpired:s,loading:e,error:t}}}},e=>{e.O(0,[619,441,493,358],()=>e(e.s=3575)),_N_E=e.O()}]);