(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{368:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},1360:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},4588:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var a=s(5155),r=s(2115),l=s(9497),n=s(4329),i=s(5820),d=s(6651),c=s(1847);let o=(0,c.A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);var m=s(9141);let x=(0,c.A)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]),h=(0,c.A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var g=s(1360),u=s(6485),p=s(368),y=s(7937),b=s(5229),j=s(5420),f=s(373);function N(){let[e,t]=(0,r.useState)(null),[s,c]=(0,r.useState)(!1),[N,w]=(0,r.useState)(1),[v,k]=(0,r.useState)([]),[A,C]=(0,r.useState)(""),[M,S]=(0,r.useState)(null),[I,L]=(0,r.useState)({isOpen:!1,messageId:null,messageName:""}),[z,E]=(0,r.useState)(!0),[O,T]=(0,r.useState)(5),{logout:D}=(0,l.A)(),P=async()=>{E(!0);try{let e=localStorage.getItem("token"),t=await fetch("".concat(f.eo,"/api/contact-messages"),{headers:{Accept:"*/*",Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("HTTP ".concat(t.status));let s=await t.json(),a=Array.isArray(s)?s.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()):[];k(a)}catch(e){k([])}finally{E(!1)}};(0,r.useEffect)(()=>{let e=localStorage.getItem("token"),s=localStorage.getItem("user");if(!e){window.location.href="/login";return}s&&t(JSON.parse(s)),P();let a=()=>c(window.innerWidth>=768);return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);let _=async()=>{if(I.messageId)try{let e=localStorage.getItem("token"),t=await fetch("".concat(f.eo,"/api/contact-messages/").concat(I.messageId),{method:"DELETE",headers:{Accept:"*/*",Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("HTTP ".concat(t.status));k(e=>e.filter(e=>e.id!==I.messageId))}catch(e){alert("Failed to delete message. Please try again.")}finally{L({isOpen:!1,messageId:null,messageName:""})}},q=e=>new Date(e).toLocaleString("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}),B=v.filter(e=>{var t,s,a,r;return(null==(t=e.fullName)?void 0:t.toLowerCase().includes(A.toLowerCase()))||(null==(s=e.email)?void 0:s.toLowerCase().includes(A.toLowerCase()))||(null==(a=e.companyName)?void 0:a.toLowerCase().includes(A.toLowerCase()))||(null==(r=e.interestedIn)?void 0:r.toLowerCase().includes(A.toLowerCase()))}),H=Math.max(Math.ceil(B.length/O),1),F=(N-1)*O,R=Math.min(F+O,B.length),V=B.slice(F,R),J=e=>{e>=1&&e<=H&&(w(e),window.scrollTo({top:300,behavior:"smooth"}))};return!e||z?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-slate-100 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Loading Contact Messages"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Please wait while we fetch your data..."})]})}):(0,a.jsxs)("div",{className:"bg-slate-100 flex flex-col md:flex-row min-h-screen text-gray-900",children:[(0,a.jsx)(n.A,{sidebarOpen:s,onToggle:c}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col transition-all duration-300",children:[(0,a.jsx)(i.A,{title:"Contact Management",user:e,onLogout:()=>D(),sidebarOpen:s,onToggle:c}),(0,a.jsx)("main",{className:"flex-1 mt-[80px] md:mt-[90px] px-4 sm:px-6 md:px-10 py-8 ".concat(s?"md:ml-72":"md:ml-24"),children:(0,a.jsxs)("div",{className:"max-w-screen-2xl mx-auto bg-white rounded-2xl shadow-inner p-6 md:p-10",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8 flex-wrap gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800",children:"Contact Management"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Manage your contact messages and inquiries"})]}),(0,a.jsxs)("div",{className:"relative w-full md:w-80",children:[(0,a.jsx)(d.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)("input",{type:"text",placeholder:"Search messages...",value:A,onChange:e=>C(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg w-full shadow-sm focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-sm text-gray-700 placeholder-gray-500 bg-white"})]})]}),(0,a.jsx)("div",{className:"grid gap-6",children:V.length>0?V.map(e=>(0,a.jsxs)("div",{className:"bg-gray-50 rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:e.fullName}),(0,a.jsxs)("div",{className:"space-y-1 text-gray-600 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o,{className:"w-4 h-4 mr-2"})," ",e.email]}),e.phoneNumber&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(m.A,{className:"w-4 h-4 mr-2"})," ",e.phoneNumber]}),e.companyName&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x,{className:"w-4 h-4 mr-2"})," ",e.companyName]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,a.jsx)("button",{onClick:()=>S(e),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition",children:(0,a.jsx)(h,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>L({isOpen:!0,messageId:e.id,messageName:e.fullName}),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition",children:(0,a.jsx)(g.A,{className:"w-4 h-4"})})]})]}),e.message&&(0,a.jsx)("div",{className:"bg-white rounded-lg p-4 mb-3 text-gray-700 text-sm border border-gray-200 leading-relaxed",children:e.message.length>150?"".concat(e.message.substring(0,150),"..."):e.message}),(0,a.jsxs)("div",{className:"flex items-center text-gray-500 text-sm",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 mr-1"}),q(e.createdAt)]})]},e.id)):(0,a.jsxs)("div",{className:"text-center py-16 text-gray-500",children:[(0,a.jsx)(o,{className:"w-14 h-14 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{children:"No messages found"})]})}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 mt-10 border-t pt-6 border-gray-200",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Showing"," ",(0,a.jsx)("span",{className:"font-medium",children:B.length?F+1:0})," ","to"," ",(0,a.jsx)("span",{className:"font-medium",children:R})," of"," ",(0,a.jsx)("span",{className:"font-medium",children:B.length})," results"]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 flex-wrap justify-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Show:"}),(0,a.jsx)("select",{value:O,onChange:e=>{T(Number(e.target.value)),w(1)},className:"border border-gray-300 rounded-md px-3 py-1 text-sm text-gray-700 bg-white focus:ring-2 focus:ring-blue-400 focus:outline-none",children:[5,10,15,20].map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("button",{onClick:()=>J(N-1),disabled:1===N,className:"flex items-center justify-center w-8 h-8 rounded-md border text-sm transition ".concat(1===N?"text-gray-400 border-gray-200 cursor-not-allowed":"text-gray-700 hover:bg-blue-100 border-gray-300"),children:(0,a.jsx)(p.A,{className:"w-4 h-4"})}),Array.from({length:H},(e,t)=>t+1).map(e=>(0,a.jsx)("button",{onClick:()=>J(e),className:"w-8 h-8 rounded-md border text-sm font-medium transition ".concat(N===e?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-blue-50"),children:e},e)),(0,a.jsx)("button",{onClick:()=>J(N+1),disabled:N===H,className:"flex items-center justify-center w-8 h-8 rounded-md border text-sm transition ".concat(N===H?"text-gray-400 border-gray-200 cursor-not-allowed":"text-gray-700 hover:bg-blue-100 border-gray-300"),children:(0,a.jsx)(y.A,{className:"w-4 h-4"})})]})]})]})]})})]}),M&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-black/40 flex items-center justify-center px-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full sm:max-w-2xl md:max-w-3xl relative overflow-y-auto max-h-[85vh]",children:[(0,a.jsx)("button",{onClick:()=>S(null),className:"absolute top-4 right-4 text-gray-500 hover:text-red-500 transition",children:(0,a.jsx)(b.A,{className:"w-6 h-6"})}),(0,a.jsx)("h3",{className:"text-2xl font-bold mb-6 text-gray-900 border-b pb-3",children:"Contact Detail"}),(0,a.jsxs)("div",{className:"space-y-5 text-gray-700 text-base leading-relaxed",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Name:"})," ",M.fullName]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Email:"})," ",M.email]}),M.phoneNumber&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Phone:"})," ",M.phoneNumber]}),M.companyName&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Company:"})," ",M.companyName]}),M.interestedIn&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Interested In:"})," ",M.interestedIn]}),M.message&&(0,a.jsxs)("div",{className:"pt-4 border-t",children:[(0,a.jsx)("p",{className:"font-semibold mb-2",children:"Message:"}),(0,a.jsx)("p",{className:"whitespace-pre-line",children:M.message})]}),(0,a.jsxs)("div",{className:"flex items-center text-gray-600 text-sm pt-4 border-t",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 mr-2"}),q(M.createdAt)]})]})]})}),I.isOpen&&(0,a.jsx)(j.A,{isOpen:I.isOpen,itemName:I.messageName,onConfirm:_,onCancel:()=>L({isOpen:!1,messageId:null,messageName:""})})]})}},5420:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var a=s(5155),r=s(2115);function l(e){let{isOpen:t,itemName:s,onConfirm:l,onCancel:n}=e,[i,d]=(0,r.useState)(!1);return t||i?(0,a.jsxs)(a.Fragment,{children:[t&&!i&&(0,a.jsx)("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl border p-6 max-w-md w-full mx-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirm Delete"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6",children:['Are you sure you want to delete "',s,'"? This action cannot be undone.']}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{onClick:n,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"No"}),(0,a.jsx)("button",{onClick:()=>{d(!0),l(),setTimeout(()=>{d(!1)},2e3)},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Yes, Delete"})]})]})}),i&&(0,a.jsx)("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50",children:(0,a.jsxs)("div",{className:"bg-green-500 text-white rounded-lg shadow-xl p-6 flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-white rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,a.jsx)("span",{className:"font-medium",children:"Deleted successfully!"})]})})]}):null}},6485:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},6651:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},7937:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},9605:(e,t,s)=>{Promise.resolve().then(s.bind(s,4588))}},e=>{e.O(0,[619,25,730,441,493,358],()=>e(e.s=9605)),_N_E=e.O()}]);