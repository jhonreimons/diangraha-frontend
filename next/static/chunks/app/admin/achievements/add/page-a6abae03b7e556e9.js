(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[59],{1362:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(1847).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},1786:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(1847).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},2056:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(1847).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},5626:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(1847).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9564:(e,t,a)=>{Promise.resolve().then(a.bind(a,9831))},9831:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var l=a(5155),s=a(2115),n=a(9497),i=a(4329),r=a(5820),c=a(5626),d=a(6613),m=a(1786),o=a(1362),h=a(2056),x=a(2619),u=a.n(x),g=a(63),p=a(373);function b(e){let{user:t,sidebarOpen:a,handleLogout:n}=e,[i,r]=(0,s.useState)({title:"",image:null}),[x,b]=(0,s.useState)(""),[f,y]=(0,s.useState)(!1),[v,j]=(0,s.useState)(!1),w=(0,g.useSearchParams)().get("edit"),N=!!w,A=(0,s.useRef)(!1),k=(0,s.useCallback)(async e=>{if(!A.current){A.current=!0;try{let t=localStorage.getItem("token"),a=await fetch("".concat(p.eo,"/api/achievements/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}}),l=await a.json();r({title:l.title,image:null}),b(l.imageUrl.startsWith("http")?l.imageUrl:"data:image/jpeg;base64,".concat(l.imageUrl))}catch(e){}}},[]);(0,s.useEffect)(()=>{N&&w&&k(w)},[N,w,k]);let I=async e=>{if(e.preventDefault(),!N&&!i.image)return void j(!0);let t=new FormData;t.append("title",i.title),i.image&&t.append("imageFile",i.image);let a=localStorage.getItem("token"),l=N?"".concat(p.eo,"/api/achievements/").concat(w):"".concat(p.eo,"/api/achievements");(await fetch(l,{method:N?"PUT":"POST",headers:{Authorization:"Bearer ".concat(a)},body:t})).ok&&y(!0)};return(0,l.jsxs)("div",{className:"relative z-10 flex justify-center w-full",children:[(0,l.jsxs)("div",{className:"w-full max-w-2xl bg-white rounded-2xl shadow-md hover:shadow-lg transition-all p-6 md:p-8 mt-4",children:[(0,l.jsxs)(u(),{href:"/admin/achievements",className:"inline-flex items-center text-blue-600 hover:text-blue-800 mb-6",children:[(0,l.jsx)(c.A,{className:"w-4 h-4 mr-2"})," Back to Achievement Management"]}),(0,l.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,l.jsx)(d.A,{className:"w-6 h-6 mr-2 text-yellow-500"}),N?"Edit Achievement":"Add New Achievement"]}),(0,l.jsxs)("form",{onSubmit:I,className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Achievement Title"}),(0,l.jsx)("input",{type:"text",name:"title",value:i.title,onChange:e=>{let{name:t,value:a}=e.target;r(e=>({...e,[t]:a}))},required:!0,placeholder:"Enter achievement title",className:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-gray-900 placeholder-gray-500 bg-white focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Achievement Image ",!N&&(0,l.jsx)("span",{className:"text-red-500 text-xs",children:"(required)"})]}),(0,l.jsxs)("div",{className:"relative border-2 border-dashed p-6 rounded-xl bg-gray-50 text-center hover:border-blue-400 transition-all",children:[x?(0,l.jsx)("img",{src:x,className:"mx-auto max-h-40 rounded-lg shadow-sm object-cover border"}):(0,l.jsx)(m.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,l.jsx)("label",{htmlFor:"image",className:"cursor-pointer text-sm text-gray-600 hover:text-blue-600 mt-4 block",children:N?"Change Image":"Choose Image"}),(0,l.jsx)("input",{type:"file",id:"image",accept:"image/*",onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];a&&(r(e=>({...e,image:a})),b(URL.createObjectURL(a)))},className:"absolute inset-0 opacity-0 cursor-pointer"})]})]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-3 pt-6",children:[(0,l.jsx)(u(),{href:"/admin/achievements",className:"px-5 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all",children:"Cancel"}),(0,l.jsx)("button",{type:"submit",className:"px-5 py-2 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 hover:scale-105 transition-all",children:N?"Update Achievement":"Add Achievement"})]})]})]}),f&&(0,l.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black/60 z-[9999] animate-fadeIn",children:(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-6 max-w-md w-full text-center animate-scaleIn",children:[(0,l.jsx)(o.A,{className:"w-12 h-12 text-green-500 mx-auto mb-3"}),(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:N?"Achievement Updated!":"Achievement Added!"}),(0,l.jsx)("button",{onClick:()=>{y(!1),window.location.href="/admin/achievements"},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all mt-4",children:"OK"})]})}),v&&(0,l.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black/60 z-[9999] animate-fadeIn",children:(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-6 max-w-md w-full text-center animate-scaleIn",children:[(0,l.jsx)(h.A,{className:"w-12 h-12 text-red-500 mx-auto mb-3"}),(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Image is required"}),(0,l.jsx)("button",{onClick:()=>j(!1),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all mt-4",children:"OK"})]})})]})}function f(){let[e,t]=(0,s.useState)(null),[a,c]=(0,s.useState)(!0),{logout:d}=(0,n.A)();return((0,s.useEffect)(()=>{let e=localStorage.getItem("token"),a=localStorage.getItem("user");if(!e){window.location.href="/login";return}a&&t(JSON.parse(a))},[]),e)?(0,l.jsxs)("div",{className:"min-h-screen bg-slate-100 flex md:flex-row flex-col",children:[(0,l.jsx)(i.A,{sidebarOpen:a,onToggle:c}),(0,l.jsxs)("div",{className:"flex-1 flex flex-col ml-0 md:ml-[260px] transition-all duration-300",children:[(0,l.jsx)(r.A,{title:"Achievement Form",user:e,onLogout:d,sidebarOpen:a}),(0,l.jsx)("main",{className:"relative flex-1 bg-gray-50 pt-[100px] px-4 md:px-8",children:(0,l.jsx)(s.Suspense,{children:(0,l.jsx)(b,{user:e,sidebarOpen:a,handleLogout:d})})})]})]}):(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."})}if("undefined"!=typeof document){let e=document.createElement("style");e.textContent="\n@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }\n@keyframes scaleIn { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }\n.animate-fadeIn { animation: fadeIn 0.25s ease-out; }\n.animate-scaleIn { animation: scaleIn 0.25s ease-out; }\n",document.head.appendChild(e)}}},e=>{e.O(0,[619,25,730,441,493,358],()=>e(e.s=9564)),_N_E=e.O()}]);