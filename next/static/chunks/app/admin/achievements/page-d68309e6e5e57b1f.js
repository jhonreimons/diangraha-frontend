(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[859],{368:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},1010:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},1360:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},5420:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(5155),l=s(2115);function r(e){let{isOpen:t,itemName:s,onConfirm:r,onCancel:n}=e,[i,d]=(0,l.useState)(!1);return t||i?(0,a.jsxs)(a.Fragment,{children:[t&&!i&&(0,a.jsx)("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl border p-6 max-w-md w-full mx-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirm Delete"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6",children:['Are you sure you want to delete "',s,'"? This action cannot be undone.']}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{onClick:n,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"No"}),(0,a.jsx)("button",{onClick:()=>{d(!0),r(),setTimeout(()=>{d(!1)},2e3)},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Yes, Delete"})]})]})}),i&&(0,a.jsx)("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50",children:(0,a.jsxs)("div",{className:"bg-green-500 text-white rounded-lg shadow-xl p-6 flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-white rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,a.jsx)("span",{className:"font-medium",children:"Deleted successfully!"})]})})]}):null}},6191:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7195:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(5155),l=s(2115),r=s(9497),n=s(4329),i=s(5820),d=s(6191),c=s(1010),o=s(1360),m=s(6613),x=s(368),h=s(7937),u=s(2619),g=s.n(u),b=s(5420),f=s(373);function p(){let[e,t]=(0,l.useState)(null),[s,u]=(0,l.useState)(!1),[p,j]=(0,l.useState)(""),[v,w]=(0,l.useState)(1),[y,N]=(0,l.useState)(!1),[A,k]=(0,l.useState)(!1),[C,S]=(0,l.useState)(null),[M,E]=(0,l.useState)(null),[T,z]=(0,l.useState)([]),[L,D]=(0,l.useState)(!0),[O,_]=(0,l.useState)(6),[P,H]=(0,l.useState)(!1),{logout:I}=(0,r.A)(),q=async()=>{try{let e=await fetch("".concat(f.eo,"/api/achievements"),{cache:"no-store"});if(!e.ok)throw Error("HTTP ".concat(e.status));let t=[...await e.json()].sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime());z(t)}catch(e){console.error("Error fetching achievements:",e),z([])}finally{D(!1)}};(0,l.useEffect)(()=>{let e=localStorage.getItem("token"),s=localStorage.getItem("user");if(!e){window.location.href="/login";return}s&&t(JSON.parse(s)),q();let a=()=>{u(window.innerWidth>=768),P||_(window.innerWidth<768?3:6)};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[P]);let B=async()=>{M&&(await fetch("".concat(f.eo,"/api/achievements/").concat(M.id),{method:"DELETE",headers:{Authorization:"Bearer "+localStorage.getItem("token")}}),z(e=>e.filter(e=>e.id!==M.id)),N(!1))},R=T.filter(e=>e.title.toLowerCase().includes(p.toLowerCase())),U=Math.max(Math.ceil(R.length/O),1),V=(v-1)*O,W=Math.min(V+O,R.length),F=R.slice(V,W);return!e||L?(0,a.jsx)("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Loading Achievement Management"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Please wait while we fetch your data..."})]})}):(0,a.jsxs)("div",{className:"bg-slate-100 flex flex-col md:flex-row min-h-screen text-gray-900",children:[(0,a.jsx)(n.A,{sidebarOpen:s,onToggle:u}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,a.jsx)(i.A,{title:"Achievement Management",user:e,onLogout:()=>I(),sidebarOpen:s,onToggle:u}),(0,a.jsx)("main",{className:"flex-1 mt-[80px] md:mt-[90px] px-4 sm:px-6 md:px-10 py-8 ".concat(s?"md:ml-72":"md:ml-24"),children:(0,a.jsxs)("div",{className:"max-w-screen-xl mx-auto pb-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8 flex-wrap gap-4",children:[(0,a.jsx)("h2",{className:"text-xl md:text-3xl font-bold text-gray-900",children:"Achievement Management"}),(0,a.jsxs)(g(),{href:"/admin/achievements/add",className:"bg-blue-600 text-white px-5 py-2.5 rounded-lg shadow hover:bg-blue-700 transition flex items-center gap-2",children:[(0,a.jsx)(d.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Add Achievement"})]})]}),(0,a.jsx)("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-3",children:(0,a.jsx)("input",{type:"text",placeholder:"Search achievements...",value:p,onChange:e=>{j(e.target.value),w(1)},className:"border border-gray-300 rounded-lg px-4 py-2 w-full sm:w-72 shadow-sm focus:ring-2 focus:ring-blue-500 text-gray-700"})}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 p-6",children:F.length>0?F.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 text-center",children:[(0,a.jsx)("div",{className:"bg-white p-3 rounded-lg flex justify-center items-center h-36 mb-4 shadow-inner",children:(0,a.jsx)("img",{src:e.imageUrl||"/placeholder.png",alt:e.title,onClick:()=>{S({url:e.imageUrl||"/placeholder.png",title:e.title}),k(!0)},className:"max-h-32 object-contain mx-auto cursor-pointer hover:scale-105 transition"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),(0,a.jsxs)("div",{className:"flex justify-center space-x-2 mt-4",children:[(0,a.jsx)(g(),{href:"/admin/achievements/add?edit=".concat(e.id),className:"text-blue-500 hover:text-blue-700 p-2 hover:bg-blue-50 rounded-lg transition",children:(0,a.jsx)(c.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>{E(e),N(!0)},className:"text-red-500 hover:text-red-700 p-2 hover:bg-red-50 rounded-lg transition",children:(0,a.jsx)(o.A,{className:"w-4 h-4"})})]})]},e.id)):(0,a.jsxs)("div",{className:"col-span-full text-center py-16",children:[(0,a.jsx)(m.A,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"No achievements found"})]})}),(0,a.jsxs)("div",{className:"px-6 py-4 flex flex-col md:flex-row items-center justify-between border-t border-gray-200 gap-3",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing"," ",(0,a.jsx)("span",{className:"font-medium",children:R.length?V+1:0})," ","to ",(0,a.jsx)("span",{className:"font-medium",children:W})," of"," ",(0,a.jsx)("span",{className:"font-medium",children:R.length})," results"]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4 justify-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Show:"}),(0,a.jsx)("select",{value:O,onChange:e=>{_(Number(e.target.value)),H(!0),w(1)},className:"border border-gray-300 rounded-md px-3 py-1 text-sm text-gray-700 bg-white focus:ring-2 focus:ring-blue-400 focus:outline-none",children:[3,6,9,12,15].map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("button",{onClick:()=>w(Math.max(v-1,1)),disabled:1===v,className:"p-2 border rounded-lg transition ".concat(1===v?"text-gray-400 border-gray-200 cursor-not-allowed":"text-gray-700 border-gray-300 hover:bg-blue-50"),children:(0,a.jsx)(x.A,{className:"w-4 h-4"})}),Array.from({length:U},(e,t)=>(0,a.jsx)("button",{onClick:()=>w(t+1),className:"px-3 py-1 rounded-md border text-sm font-medium transition ".concat(v===t+1?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-blue-50"),children:t+1},t)),(0,a.jsx)("button",{onClick:()=>w(Math.min(v+1,U)),disabled:v===U,className:"p-2 border rounded-lg transition ".concat(v===U?"text-gray-400 border-gray-200 cursor-not-allowed":"text-gray-700 border-gray-300 hover:bg-blue-50"),children:(0,a.jsx)(h.A,{className:"w-4 h-4"})})]})]})]})]}),(0,a.jsx)(b.A,{isOpen:y,itemName:(null==M?void 0:M.title)||"",onConfirm:B,onCancel:()=>N(!1)}),A&&C&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[9999]",onClick:()=>k(!1),children:(0,a.jsxs)("div",{className:"bg-white p-4 rounded-xl max-w-3xl w-full mx-4 shadow-xl",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:C.title}),(0,a.jsx)("button",{onClick:()=>k(!1),className:"text-gray-500 hover:text-red-600 text-xl",children:"âœ•"})]}),(0,a.jsx)("img",{src:C.url,className:"w-full max-h-[80vh] object-contain rounded-lg"})]})})]})})]})]})}},7937:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},8650:(e,t,s)=>{Promise.resolve().then(s.bind(s,7195))}},e=>{e.O(0,[619,25,730,441,493,358],()=>e(e.s=8650)),_N_E=e.O()}]);