(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[255],{368:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},1010:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},1360:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},2108:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},4755:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>w});var t=a(5155),l=a(2115),r=a(2619),n=a.n(r),i=a(9497),d=a(4329),c=a(5820),o=a(5420),m=a(6191),x=a(2108),u=a(4033),h=a(1010),f=a(1360),p=a(368),b=a(7937),g=a(5229),j=a(373);let v=e=>{if(!e)return"/placeholder.png";let s=e.trim();return s.startsWith("data:image")?s:/^[A-Za-z0-9+/=]+$/.test(s)?"data:image/jpeg;base64,".concat(s):s};function w(){let{logout:e}=(0,i.A)(),[s,a]=(0,l.useState)(null),[r,w]=(0,l.useState)(!1),[N,y]=(0,l.useState)([]),[A,k]=(0,l.useState)(!0),[I,S]=(0,l.useState)(""),[C,D]=(0,l.useState)(new Set),[E,M]=(0,l.useState)(1),[z,L]=(0,l.useState)(5),[O,T]=(0,l.useState)(!1),[B,_]=(0,l.useState)(null),[U,W]=(0,l.useState)({open:!1,id:null,name:""}),[F,P]=(0,l.useState)({open:!1,serviceId:null,subId:null,name:""}),[q,H]=(0,l.useState)({open:!1,subId:null,workId:null,name:""}),[R,V]=(0,l.useState)({open:!1,serviceId:null,featureId:null,name:""});(0,l.useEffect)(()=>{if(!localStorage.getItem("token")){window.location.href="/login";return}let e=localStorage.getItem("user");e&&a(JSON.parse(e)),J();let s=()=>w(window.innerWidth>=1024);return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);let J=async()=>{k(!0);try{let e=localStorage.getItem("token")||"",s=await fetch("".concat(j.eo,"/api/services"),{headers:{Authorization:"Bearer ".concat(e),Accept:"*/*"},cache:"no-store"}),a=await s.json(),t=(Array.isArray(a)?a:[]).map(e=>({id:e.id,name:e.name,shortDesc:e.shortDesc||"",longDesc:e.longDesc||"",imageUrl:e.imageBase64||e.imageUrl||null,createdAt:e.createdAt,features:e.features||[],subServices:e.subServices||[]}));t.sort((e,s)=>new Date(s.createdAt).getTime()-new Date(e.createdAt).getTime()),y(t)}finally{k(!1)}},Y=(0,l.useMemo)(()=>N.filter(e=>e.name.toLowerCase().includes(I.toLowerCase())||e.shortDesc.toLowerCase().includes(I.toLowerCase())||e.longDesc.toLowerCase().includes(I.toLowerCase())),[N,I]),Z=Y.length,$=Math.max(1,Math.ceil(Z/z)),G=(E-1)*z,K=Y.slice(G,G+z),Q=async()=>{if(!U.id)return;let e=localStorage.getItem("token")||"";await fetch("".concat(j.eo,"/api/services/").concat(U.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}}),y(e=>e.filter(e=>e.id!==U.id)),W({open:!1,id:null,name:""})},X=async()=>{if(!F.subId||!F.serviceId)return;let e=localStorage.getItem("token")||"";await fetch("".concat(j.eo,"/api/services/").concat(F.serviceId,"/sub-services/").concat(F.subId),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}}),y(e=>e.map(e=>e.id!==F.serviceId?e:{...e,subServices:e.subServices.filter(e=>e.id!==F.subId)})),P({open:!1,subId:null,serviceId:null,name:""})},ee=async()=>{if(!q.subId||!q.workId)return;let e=localStorage.getItem("token")||"";await fetch("".concat(j.eo,"/api/services/sub-services/").concat(q.subId,"/works/").concat(q.workId),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}}),y(e=>e.map(e=>({...e,subServices:e.subServices.map(e=>e.id!==q.subId?e:{...e,works:e.works.filter(e=>e.id!==q.workId)})}))),H({open:!1,subId:null,workId:null,name:""})},es=async()=>{if(!R.serviceId||!R.featureId)return;let e=localStorage.getItem("token")||"";await fetch("".concat(j.eo,"/api/services/").concat(R.serviceId,"/features/").concat(R.featureId),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}}),y(e=>e.map(e=>e.id!==R.serviceId?e:{...e,features:e.features.filter(e=>e.id!==R.featureId)})),V({open:!1,serviceId:null,featureId:null,name:""})};return!s||A?(0,t.jsx)("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Loading Services Management"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Please wait while we fetch your data..."})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-slate-100 flex flex-col md:flex-row text-gray-900 dark:text-gray-900",children:[(0,t.jsx)(d.A,{sidebarOpen:r,onToggle:w}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,t.jsx)(c.A,{title:"Service Management",user:s,onLogout:e,sidebarOpen:r,onToggle:w}),(0,t.jsx)("main",{className:"flex-1 pt-[72px] pb-6 px-4 md:px-6 transition-all duration-300 ".concat(r?"md:ml-72":"md:ml-24"),children:(0,t.jsxs)("div",{className:"bg-gray-50 p-6 rounded-xl shadow-md",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 mb-6",children:[(0,t.jsx)("h2",{className:"text-xl md:text-3xl font-bold",children:"Services Management"}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row w-full md:w-auto gap-3",children:[(0,t.jsx)("input",{type:"text",placeholder:"Search services...",value:I,onChange:e=>{S(e.target.value),M(1)},className:"border rounded-lg px-3 py-2 shadow-sm flex-1 w-full"}),(0,t.jsxs)(n(),{href:"/admin/services/add",className:"bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center justify-center gap-2 hover:bg-blue-700 w-full sm:w-auto",children:[(0,t.jsx)(m.A,{className:"w-4 h-4"}),"Add Service"]})]})]}),K.map(e=>(0,t.jsxs)("div",{className:"bg-white p-5 rounded-xl border shadow mb-4",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-4 text-center sm:text-left w-full",children:[e.imageUrl&&(0,t.jsx)("img",{src:v(e.imageUrl),loading:"lazy",className:"w-20 h-20 rounded-xl border shadow cursor-pointer object-contain",onClick:()=>{_({url:v(e.imageUrl),name:e.name}),T(!0)}}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:e.name}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:e.shortDesc})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>{D(s=>{let a=new Set(s);return a.has(e.id)?a.delete(e.id):a.add(e.id),a})},className:"hover:bg-gray-100 rounded-lg p-1 transition",children:C.has(e.id)?(0,t.jsx)(x.A,{className:"w-6 h-6"}):(0,t.jsx)(u.A,{className:"w-6 h-6"})}),(0,t.jsx)(n(),{href:"/admin/services/add?edit=".concat(e.id),children:(0,t.jsx)(h.A,{className:"w-5 h-5 text-blue-600 hover:text-blue-800"})}),(0,t.jsx)(f.A,{className:"w-5 h-5 text-red-600 cursor-pointer hover:text-red-700",onClick:()=>W({open:!0,id:e.id,name:e.name})})]})]}),C.has(e.id)&&(0,t.jsxs)("div",{className:"mt-4 border-t pt-4",children:[(0,t.jsx)("p",{className:"text-gray-700 mb-4",children:e.longDesc}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsxs)("div",{className:"flex justify-between mb-3",children:[(0,t.jsx)("h4",{className:"text-lg font-bold",children:"Sub Services"}),(0,t.jsxs)(n(),{href:"/admin/services/".concat(e.id,"/subservice/add"),className:"flex items-center gap-2 px-3 py-1 bg-blue-100 text-blue-700 rounded-lg",children:[(0,t.jsx)(m.A,{className:"w-4 h-4"})," Add Sub Service"]})]}),e.subServices.map(s=>(0,t.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border mb-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h5",{className:"font-semibold",children:s.name}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:s.description})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n(),{href:"/admin/services/".concat(e.id,"/subservice/add?edit=").concat(s.id),children:(0,t.jsx)(h.A,{className:"w-5 h-5 text-blue-600"})}),(0,t.jsx)(f.A,{className:"w-5 h-5 text-red-600 cursor-pointer",onClick:()=>P({open:!0,subId:s.id,serviceId:e.id,name:s.name})})]})]}),(0,t.jsxs)("div",{className:"mt-3 ml-4",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("h6",{className:"font-semibold text-sm",children:"Our Work"}),(0,t.jsxs)(n(),{href:"/admin/services/".concat(e.id,"/work/add?subServiceId=").concat(s.id),className:"flex items-center gap-2 px-2 py-1 bg-green-100 text-green-700 rounded-lg",children:[(0,t.jsx)(m.A,{className:"w-4 h-4"})," Add Work"]})]}),s.works.map(a=>(0,t.jsxs)("div",{className:"flex justify-between mt-1 p-2 ",children:[(0,t.jsx)("span",{className:"text-sm",children:a.description}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n(),{href:"/admin/services/".concat(e.id,"/work/add?subServiceId=").concat(s.id,"&edit=").concat(a.id),children:(0,t.jsx)(h.A,{className:"w-4 h-4 text-blue-600"})}),(0,t.jsx)(f.A,{className:"w-4 h-4 text-red-600 cursor-pointer",onClick:()=>H({open:!0,subId:s.id,workId:a.id,name:a.description})})]})]},a.id))]})]},s.id))]}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsxs)("div",{className:"flex justify-between mb-3",children:[(0,t.jsx)("h4",{className:"text-lg font-bold",children:"Features"}),(0,t.jsxs)(n(),{href:"/admin/services/".concat(e.id,"/features/add"),className:"flex items-center gap-2 px-3 py-1 bg-blue-100 text-blue-700 rounded-lg",children:[(0,t.jsx)(m.A,{className:"w-4 h-4"})," Add Feature"]})]}),e.features.map(s=>(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border mb-3 flex justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold",children:s.featureName}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:s.featureDesc})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(n(),{href:"/admin/services/".concat(e.id,"/features/add?edit=").concat(s.id),children:(0,t.jsx)(h.A,{className:"w-5 h-5 text-blue-600"})}),(0,t.jsx)(f.A,{className:"w-5 h-5 text-red-600 cursor-pointer",onClick:()=>V({open:!0,serviceId:e.id,featureId:s.id,name:s.featureName})})]})]},s.id))]})]})]},e.id)),(0,t.jsxs)("div",{className:"flex justify-between items-center mt-6 border-t pt-4",children:[(0,t.jsxs)("div",{children:["Showing ",(0,t.jsx)("b",{children:G+1})," -"," ",(0,t.jsx)("b",{children:Math.min(G+K.length,Z)})," of ",(0,t.jsx)("b",{children:Z})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{disabled:1===E,onClick:()=>M(E-1),children:(0,t.jsx)(p.A,{})}),Array.from({length:$},(e,s)=>(0,t.jsx)("button",{onClick:()=>M(s+1),className:"px-3 py-1 rounded-lg border ".concat(E===s+1?"bg-blue-600 text-white":""),children:s+1},s)),(0,t.jsx)("button",{disabled:E===$,onClick:()=>M(E+1),children:(0,t.jsx)(b.A,{})})]}),(0,t.jsxs)("select",{value:z,onChange:e=>{L(parseInt(e.target.value)),M(1)},className:"border rounded-lg px-2 py-1",children:[(0,t.jsx)("option",{value:5,children:"5"}),(0,t.jsx)("option",{value:10,children:"10"})]})]})]})})]}),O&&B&&(0,t.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-[9999]",onClick:()=>T(!1),children:(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-xl max-w-3xl",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,t.jsx)("h2",{className:"font-bold",children:B.name}),(0,t.jsx)(g.A,{className:"cursor-pointer",onClick:()=>T(!1)})]}),(0,t.jsx)("img",{src:B.url,className:"max-h-[80vh] object-contain w-full"})]})}),(0,t.jsx)(o.A,{isOpen:U.open,itemName:U.name,onCancel:()=>W({open:!1,id:null,name:""}),onConfirm:Q}),(0,t.jsx)(o.A,{isOpen:F.open,itemName:F.name,onCancel:()=>P({open:!1,subId:null,serviceId:null,name:""}),onConfirm:X}),(0,t.jsx)(o.A,{isOpen:q.open,itemName:q.name,onCancel:()=>H({open:!1,subId:null,workId:null,name:""}),onConfirm:ee}),(0,t.jsx)(o.A,{isOpen:R.open,itemName:R.name,onCancel:()=>V({open:!1,featureId:null,serviceId:null,name:""}),onConfirm:es})]})}},5420:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});var t=a(5155),l=a(2115);function r(e){let{isOpen:s,itemName:a,onConfirm:r,onCancel:n}=e,[i,d]=(0,l.useState)(!1);return s||i?(0,t.jsxs)(t.Fragment,{children:[s&&!i&&(0,t.jsx)("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl border p-6 max-w-md w-full mx-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirm Delete"}),(0,t.jsxs)("p",{className:"text-gray-600 mb-6",children:['Are you sure you want to delete "',a,'"? This action cannot be undone.']}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,t.jsx)("button",{onClick:n,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"No"}),(0,t.jsx)("button",{onClick:()=>{d(!0),r(),setTimeout(()=>{d(!1)},2e3)},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Yes, Delete"})]})]})}),i&&(0,t.jsx)("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50",children:(0,t.jsxs)("div",{className:"bg-green-500 text-white rounded-lg shadow-xl p-6 flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-6 h-6 bg-white rounded-full flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,t.jsx)("span",{className:"font-medium",children:"Deleted successfully!"})]})})]}):null}},6138:(e,s,a)=>{Promise.resolve().then(a.bind(a,4755))},6191:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7937:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])}},e=>{e.O(0,[619,25,730,441,493,358],()=>e(e.s=6138)),_N_E=e.O()}]);