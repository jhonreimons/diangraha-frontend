(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[915],{434:(e,a,t)=>{Promise.resolve().then(t.bind(t,2123))},1362:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(1847).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},2123:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>h});var r=t(5155),s=t(2115),n=t(9497),l=t(4329),i=t(5820),c=t(5626),o=t(1362),d=t(2619),u=t.n(d),m=t(63),f=t(373);function h(){let[e,a]=(0,s.useState)(null),[t,d]=(0,s.useState)(!0),[h,x]=(0,s.useState)({featureName:"",featureDesc:""}),[g,p]=(0,s.useState)(!1),[b,y]=(0,s.useState)(!1),{logout:N}=(0,n.A)(),w=(0,m.useParams)(),v=(0,m.useSearchParams)(),j=null==w?void 0:w.id,k=v.get("edit"),S=!!k,A=async()=>{if(j&&k)try{var e,a,t;let r=await fetch("".concat(f.eo,"/api/services"),{headers:{Accept:"application/json"},cache:"no-store"});if(!r.ok)throw Error("HTTP ".concat(r.status));let s=(await r.json()).find(e=>Number(e.id)===Number(j));if(!s)return void console.warn("Service with ID ".concat(j," not found"));let n=null==(e=s.features)?void 0:e.find(e=>Number(e.id)===Number(k));n?x({featureName:null!=(a=n.featureName)?a:"",featureDesc:null!=(t=n.featureDesc)?t:""}):console.warn("Feature with ID ".concat(k," not found in service ").concat(j))}catch(e){console.error("Error fetching feature data:",e)}};(0,s.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("user");if(!e){window.location.href="/login";return}t&&a(JSON.parse(t)),S&&A()},[S,k,j]);let F=e=>{let{name:a,value:t}=e.target;x(e=>({...e,[a]:t}))},E=async e=>{e.preventDefault(),y(!0);try{let e=S?"".concat(f.eo,"/api/services/").concat(j,"/features/").concat(k):"".concat(f.eo,"/api/services/").concat(j,"/features"),a=await fetch(e,{method:S?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify(h)});if(!a.ok)throw Error("HTTP ".concat(a.status));p(!0)}catch(e){console.error("Error ".concat(S?"updating":"adding"," feature:"),e),alert("Failed to ".concat(S?"update":"add"," feature"))}finally{y(!1)}};return e?(0,r.jsxs)("div",{className:"min-h-screen bg-slate-100 flex flex-col md:flex-row",children:[(0,r.jsx)(l.A,{sidebarOpen:t,onToggle:d}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col ml-0 md:ml-[260px] transition-all duration-300",children:[(0,r.jsx)(i.A,{title:S?"Edit Service Feature":"Add Service Feature",user:e,onLogout:()=>N(),sidebarOpen:t,onToggle:d}),(0,r.jsxs)("main",{className:"relative z-10 flex-1 bg-gray-50/50 min-h-screen pt-[100px] px-4 md:px-8",children:[(0,r.jsxs)("div",{className:"max-w-2xl mx-auto bg-white rounded-2xl shadow-md hover:shadow-lg transition-all p-8",children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)(u(),{href:"/admin/services",className:"inline-flex items-center text-blue-600 hover:text-blue-800 transition-colors",children:[(0,r.jsx)(c.A,{className:"w-4 h-4 mr-2"}),"Back to Service Management"]})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:S?"Edit Feature":"Add New Feature"}),(0,r.jsxs)("form",{onSubmit:E,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"featureName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Feature Name"}),(0,r.jsx)("input",{type:"text",id:"featureName",name:"featureName",value:h.featureName,onChange:F,required:!0,placeholder:"Enter feature name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm  text-gray-900 placeholder-gray-400 bg-white focus:ring-2 focus:ring-blue-400 focus:border-blue-400 outline-none transition-all"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"featureDesc",className:"block text-sm font-medium text-gray-700 mb-2",children:"Feature Description"}),(0,r.jsx)("textarea",{id:"featureDesc",name:"featureDesc",value:h.featureDesc,onChange:F,rows:4,required:!0,placeholder:"Enter feature description",className:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm  text-gray-900 placeholder-gray-400 bg-white resize-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 outline-none transition-all"})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,r.jsx)(u(),{href:"/admin/services",className:"px-5 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:b,className:"px-5 py-2 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 hover:scale-105 disabled:opacity-50 transition-all",children:b?S?"Updating...":"Adding...":S?"Update Feature":"Add Feature"})]})]})]}),g&&(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black/60 z-[9999] animate-fadeIn",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-md text-center transform animate-scaleIn",children:[(0,r.jsx)(o.A,{className:"w-12 h-12 text-green-500 mx-auto mb-3"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:S?"Feature Updated!":"Feature Added!"}),(0,r.jsxs)("p",{className:"text-gray-600 text-sm mb-5",children:['Feature "',h.featureName,'"'," ",S?"updated successfully.":"added successfully."]}),(0,r.jsx)("button",{onClick:()=>{p(!1),window.location.href="/admin/services"},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all",children:"OK"})]})})]})]})]}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center text-gray-700",children:"Loading..."})}if("undefined"!=typeof document){let e=document.createElement("style");e.textContent="\n@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }\n@keyframes scaleIn { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }\n.animate-fadeIn { animation: fadeIn 0.25s ease-out; }\n.animate-scaleIn { animation: scaleIn 0.25s ease-out; }\n",document.head.appendChild(e)}},5626:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(1847).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])}},e=>{e.O(0,[619,25,730,441,493,358],()=>e(e.s=434)),_N_E=e.O()}]);