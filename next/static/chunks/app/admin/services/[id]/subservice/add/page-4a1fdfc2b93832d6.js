(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[269],{1362:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},2249:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var s=a(5155),r=a(2115),n=a(9497),i=a(4329),l=a(5820),c=a(5626),o=a(1362),d=a(2619),m=a.n(d),u=a(63),h=a(373);function x(){let[e,t]=(0,r.useState)(null),[a,d]=(0,r.useState)(!0),[x,b]=(0,r.useState)({name:"",description:""}),[g,p]=(0,r.useState)(!1),[f,y]=(0,r.useState)(!1),{logout:v}=(0,n.A)(),w=(0,u.useParams)(),S=(0,u.useSearchParams)(),j=null==w?void 0:w.id,N=S.get("edit"),k=!!N,A=async()=>{if(N)try{var e,t;let a=localStorage.getItem("token");if(!a)throw Error("Missing token");let s=await fetch("".concat(h.eo,"/api/services/sub-services/").concat(N),{headers:{Authorization:"Bearer ".concat(a),Accept:"application/json"},cache:"no-store"});if(!s.ok)throw Error("HTTP ".concat(s.status));let r=await s.json();b({name:null!=(e=r.name)?e:"",description:null!=(t=r.description)?t:""})}catch(e){console.error("Error fetching sub-service:",e),alert("Failed to load existing sub-service data.")}};(0,r.useEffect)(()=>{let e=localStorage.getItem("token"),a=localStorage.getItem("user");if(!e){window.location.href="/login";return}a&&t(JSON.parse(a)),k&&A()},[k,N]);let E=e=>{let{name:t,value:a}=e.target;b(e=>({...e,[t]:a}))},I=async e=>{e.preventDefault(),y(!0);try{let e=localStorage.getItem("token");if(!e)throw Error("Missing token");let t=k?"".concat(h.eo,"/api/services/").concat(j,"/sub-services/").concat(N):"".concat(h.eo,"/api/services/").concat(j,"/sub-services"),a=await fetch(t,{method:k?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({name:x.name,description:x.description})});if(!a.ok)throw Error("HTTP ".concat(a.status));p(!0)}catch(e){console.error("Error ".concat(k?"updating":"adding"," sub-service:"),e),alert("Failed to ".concat(k?"update":"add"," sub-service."))}finally{y(!1)}};return e?(0,s.jsxs)("div",{className:"min-h-screen bg-slate-100 flex flex-col md:flex-row",children:[(0,s.jsx)(i.A,{sidebarOpen:a,onToggle:d}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col ml-0 md:ml-[260px] transition-all duration-300",children:[(0,s.jsx)(l.A,{title:k?"Edit Sub Service":"Add Sub Service",user:e,onLogout:()=>v(),sidebarOpen:a,onToggle:d}),(0,s.jsxs)("main",{className:"relative z-10 flex-1 bg-gray-50/50 min-h-screen pt-[100px] px-4 md:px-8",children:[(0,s.jsxs)("div",{className:"max-w-2xl mx-auto bg-white rounded-2xl shadow-md hover:shadow-lg transition-all p-8",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)(m(),{href:"/admin/services",className:"inline-flex items-center text-blue-600 hover:text-blue-800 transition-colors",children:[(0,s.jsx)(c.A,{className:"w-4 h-4 mr-2"}),"Back to Service Management"]})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:k?"Edit Sub Service":"Add New Sub Service"}),(0,s.jsxs)("form",{onSubmit:I,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Sub Service Name"}),(0,s.jsx)("input",{type:"text",id:"name",name:"name",value:x.name,onChange:E,required:!0,placeholder:"Enter sub service name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm  text-gray-900 placeholder-gray-400 bg-white focus:ring-2 focus:ring-blue-400 focus:border-blue-400 outline-none transition-all"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,s.jsx)("textarea",{id:"description",name:"description",value:x.description,onChange:E,rows:4,required:!0,placeholder:"Enter sub service description",className:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm  text-gray-900 placeholder-gray-400 bg-white resize-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 outline-none transition-all"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,s.jsx)(m(),{href:"/admin/services",className:"px-5 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:f,className:"px-5 py-2 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 hover:scale-105 disabled:opacity-50 transition-all",children:f?k?"Updating...":"Adding...":k?"Update Sub Service":"Add Sub Service"})]})]})]}),g&&(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black/60 z-[9999] animate-fadeIn",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-md text-center transform animate-scaleIn",children:[(0,s.jsx)(o.A,{className:"w-12 h-12 text-green-500 mx-auto mb-3"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:k?"Sub Service Updated!":"Sub Service Added!"}),(0,s.jsxs)("p",{className:"text-gray-600 text-sm mb-5",children:['Sub Service "',x.name,'"'," ",k?"updated successfully.":"added successfully."]}),(0,s.jsx)("button",{onClick:()=>{p(!1),window.location.href="/admin/services"},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all",children:"OK"})]})})]})]})]}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center text-gray-700",children:"Loading..."})}if("undefined"!=typeof document){let e=document.createElement("style");e.textContent="\n@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }\n@keyframes scaleIn { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }\n.animate-fadeIn { animation: fadeIn 0.25s ease-out; }\n.animate-scaleIn { animation: scaleIn 0.25s ease-out; }\n",document.head.appendChild(e)}},5626:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7276:(e,t,a)=>{Promise.resolve().then(a.bind(a,2249))}},e=>{e.O(0,[619,25,730,441,493,358],()=>e(e.s=7276)),_N_E=e.O()}]);