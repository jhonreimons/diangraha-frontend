(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[97],{368:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},1010:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},1360:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},5420:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(5155),l=s(2115);function r(e){let{isOpen:t,itemName:s,onConfirm:r,onCancel:n}=e,[c,i]=(0,l.useState)(!1);return t||c?(0,a.jsxs)(a.Fragment,{children:[t&&!c&&(0,a.jsx)("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl border p-6 max-w-md w-full mx-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirm Delete"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6",children:['Are you sure you want to delete "',s,'"? This action cannot be undone.']}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{onClick:n,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"No"}),(0,a.jsx)("button",{onClick:()=>{i(!0),r(),setTimeout(()=>{i(!1)},2e3)},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Yes, Delete"})]})]})}),c&&(0,a.jsx)("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50",children:(0,a.jsxs)("div",{className:"bg-green-500 text-white rounded-lg shadow-xl p-6 flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-white rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,a.jsx)("span",{className:"font-medium",children:"Deleted successfully!"})]})})]}):null}},5882:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var a=s(5155),l=s(2115),r=s(9497),n=s(4329),c=s(5820),i=s(6191),d=s(6651);let o=(0,s(1847).A)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);var x=s(1010),m=s(1360),h=s(368),u=s(7937),g=s(2619),p=s.n(g),b=s(5420),f=s(373);function j(){let[e,t]=(0,l.useState)(null),[s,g]=(0,l.useState)(!1),[j,y]=(0,l.useState)(1),[w,N]=(0,l.useState)(""),[v,k]=(0,l.useState)("created_desc"),[A,C]=(0,l.useState)(!1),[S,M]=(0,l.useState)(null),[T,E]=(0,l.useState)([]),[L,z]=(0,l.useState)(!0),[_,D]=(0,l.useState)(5),[P,O]=(0,l.useState)(!1),[I,H]=(0,l.useState)(!1),[q,B]=(0,l.useState)(null),{logout:U}=(0,r.A)(),V=async()=>{try{let e=localStorage.getItem("token");if(!e)throw Error("Missing token");let t=await fetch("".concat(f.eo,"/api/clients"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("HTTP ".concat(t.status));let s=[...await t.json()].sort((e,t)=>new Date(t.createdAt.replace(" ","T")).getTime()-new Date(e.createdAt.replace(" ","T")).getTime());E(s)}catch(e){console.error("Error fetching clients:",e),E([])}finally{z(!1)}};(0,l.useEffect)(()=>{let e=localStorage.getItem("token"),s=localStorage.getItem("user");if(!e){window.location.href="/login";return}s&&t(JSON.parse(s)),V();let a=()=>{g(window.innerWidth>=768),P||D(window.innerWidth<768?3:5)};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[P]);let F=async()=>{if(S)try{let e=localStorage.getItem("token");if(!e)throw Error("Missing token");let t=await fetch("".concat(f.eo,"/api/clients/").concat(S.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("HTTP ".concat(t.status));E(e=>e.filter(e=>e.id!==S.id))}catch(e){console.error("Error deleting client:",e),alert("Failed to delete client. Please try again.")}finally{C(!1),M(null)}},R=[...T.filter(e=>e.name.toLowerCase().includes(w.toLowerCase()))].sort((e,t)=>"asc"===v?e.name.localeCompare(t.name):"desc"===v?t.name.localeCompare(e.name):new Date(t.createdAt.replace(" ","T")).getTime()-new Date(e.createdAt.replace(" ","T")).getTime()),W=Math.ceil(R.length/_)||1,Z=(j-1)*_,J=R.slice(Z,Z+_),Y=e=>y(e);return!e||L?(0,a.jsx)("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Loading Client Management"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Please wait while we fetch your data..."})]})}):(0,a.jsxs)("div",{className:"bg-slate-100 flex flex-col md:flex-row min-h-screen",children:[(0,a.jsx)(n.A,{sidebarOpen:s,onToggle:g}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,a.jsx)(c.A,{title:"Client Management",user:e,onLogout:()=>U(),sidebarOpen:s,onToggle:g}),(0,a.jsx)("main",{className:"flex-1 transition-all duration-300 mt-[80px] md:mt-[88px] px-4 md:px-6 ".concat(s?"md:ml-72":"md:ml-24"),children:(0,a.jsxs)("div",{className:"bg-gray-50/50",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-base md:text-2xl font-bold text-gray-900",children:"Client Management"}),(0,a.jsx)("p",{className:"text-xs md:text-base text-gray-600",children:"Manage your clients and their logos"})]}),(0,a.jsxs)(p(),{href:"/admin/clients/add",className:"bg-blue-600 text-white px-3 py-1 md:px-4 md:py-2 rounded-lg shadow hover:shadow-md hover:bg-blue-700 transition-all flex items-center space-x-2 text-sm md:text-base",children:[(0,a.jsx)(i.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Add New Client"})]})]}),(0,a.jsx)("div",{className:"flex items-center justify-between mb-4 gap-3 flex-wrap",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[(0,a.jsxs)("div",{className:"relative flex-1 sm:w-72",children:[(0,a.jsx)(d.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)("input",{type:"text",placeholder:"Search clients",value:w,onChange:e=>{N(e.target.value),y(1)},className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg w-full shadow-sm focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-sm text-gray-600 placeholder-gray-500"})]}),(0,a.jsxs)("button",{onClick:()=>{"created_desc"===v?k("asc"):"asc"===v?k("desc"):k("created_desc")},className:"flex items-center space-x-2 px-3 py-2 border rounded-lg text-xs md:text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors whitespace-nowrap",children:[(0,a.jsx)(o,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:["Sort (","asc"===v?"A-Z":"Z-A",")"]})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-md overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full border-collapse text-sm md:text-base",children:[(0,a.jsx)("thead",{className:"bg-blue-50 border-b",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"w-[50%] px-4 py-3 text-left font-semibold text-blue-700 uppercase tracking-wider",children:"Client Name"}),(0,a.jsx)("th",{className:"w-[30%] px-4 py-3 text-left font-semibold text-blue-700 uppercase tracking-wider",children:"Logo"}),(0,a.jsx)("th",{className:"w-[20%] px-4 py-3 text-center font-semibold text-blue-700 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-100",children:J.length>0?J.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-blue-50 transition-colors",children:[(0,a.jsxs)("td",{className:"px-4 py-3 font-medium text-gray-900 sm:table-cell",children:[(0,a.jsx)("div",{className:"sm:hidden text-gray-500 text-xs mb-1",children:"Client Name"}),e.name]}),(0,a.jsx)("td",{className:"px-4 py-3 sm:table-cell flex justify-center sm:block",children:e.imageUrl?(0,a.jsx)("img",{src:e.imageUrl,alt:e.name,className:"w-28 h-28 sm:w-48 sm:h-48 rounded-xl object-contain shadow-sm cursor-pointer",onClick:()=>{B({url:e.imageUrl||"/placeholder.png",name:e.name}),H(!0)}}):(0,a.jsx)("span",{className:"text-gray-400 italic text-sm",children:"No Logo"})}),(0,a.jsxs)("td",{className:"px-4 py-3 text-center sm:table-cell",children:[(0,a.jsx)("div",{className:"sm:hidden text-gray-500 text-xs mb-1",children:"Actions"}),(0,a.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,a.jsx)(p(),{href:"/admin/clients/add?edit=".concat(e.id),className:"text-blue-500 hover:text-blue-700 p-1 hover:bg-blue-50 rounded-lg",children:(0,a.jsx)(x.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>{M(e),C(!0)},className:"text-red-500 hover:text-red-700 p-1 hover:bg-red-50 rounded-lg",children:(0,a.jsx)(m.A,{className:"w-4 h-4"})})]})]})]},e.id)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:3,className:"px-4 py-6 text-center text-gray-500 text-sm",children:"No clients found."})})})]})}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-6 border-t pt-4 text-sm text-gray-700 gap-4 flex-wrap",children:[(0,a.jsxs)("div",{children:["Showing"," ",(0,a.jsxs)("span",{className:"font-semibold",children:[T.length>0?Z+1:0,"â€“",Math.min(Z+J.length,T.length)]})," ","of ",(0,a.jsx)("span",{className:"font-semibold",children:T.length})," clients"]}),(0,a.jsxs)("div",{className:"flex flex-wrap justify-center items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>Y(j-1),disabled:1===j,className:"px-3 py-1 border rounded-lg disabled:opacity-50 hover:bg-gray-100 flex items-center gap-1",children:[(0,a.jsx)(h.A,{className:"w-4 h-4"})," Prev"]}),Array.from({length:W},(e,t)=>(0,a.jsx)("button",{onClick:()=>Y(t+1),className:"px-3 py-1 rounded-lg border ".concat(j===t+1?"bg-blue-600 text-white border-blue-600":"hover:bg-gray-100 text-gray-700"),children:t+1},t+1)),(0,a.jsxs)("button",{onClick:()=>Y(j+1),disabled:j===W,className:"px-3 py-1 border rounded-lg disabled:opacity-50 hover:bg-gray-100 flex items-center gap-1",children:["Next ",(0,a.jsx)(u.A,{className:"w-4 h-4"})]})]}),(0,a.jsxs)("label",{className:"flex items-center text-sm text-gray-600",children:["Show",(0,a.jsxs)("select",{value:_,onChange:e=>{D(parseInt(e.target.value)),O(!0),y(1)},className:"ml-2 px-2 py-1 border rounded-md text-gray-700 focus:ring-blue-400",children:[(0,a.jsx)("option",{value:3,children:"3"}),(0,a.jsx)("option",{value:5,children:"5"}),(0,a.jsx)("option",{value:10,children:"10"})]}),(0,a.jsx)("span",{className:"ml-1",children:"per page"})]})]}),(0,a.jsx)(b.A,{isOpen:A,itemName:(null==S?void 0:S.name)||"",onConfirm:F,onCancel:()=>{C(!1),M(null)}}),I&&q&&(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-[9999] p-4",onClick:()=>H(!1),children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 w-full max-w-lg sm:max-w-xl md:max-w-2xl lg:max-w-3xl",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"p-4 flex justify-between items-center border-b",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:q.name}),(0,a.jsx)("button",{onClick:()=>H(!1),className:"text-gray-500 hover:text-red-600 text-2xl",children:"\xd7"})]}),(0,a.jsx)("div",{className:"p-6 flex justify-center bg-gray-50",children:(0,a.jsx)("img",{src:q.url,alt:q.name,className:"max-w-full max-h-[80vh] object-contain rounded-md shadow-lg"})})]})})]})})]})]})}},6191:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6651:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},7074:(e,t,s)=>{Promise.resolve().then(s.bind(s,5882))},7937:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])}},e=>{e.O(0,[619,25,730,441,493,358],()=>e(e.s=7074)),_N_E=e.O()}]);