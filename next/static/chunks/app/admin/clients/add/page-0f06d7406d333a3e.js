(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[877],{1362:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(1847).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},1786:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(1847).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},2056:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(1847).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},3044:(e,t,a)=>{Promise.resolve().then(a.bind(a,4985))},4985:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var l=a(5155),s=a(2115),n=a(9497),r=a(4329),i=a(5820),c=a(5626),o=a(1786),d=a(1362),m=a(2056),x=a(2619),h=a.n(x),u=a(63),g=a(373);function p(e){let{user:t,sidebarOpen:a,handleLogout:n}=e,r=(0,u.useSearchParams)().get("edit"),i=!!r,[x,p]=(0,s.useState)({name:"",image:null}),[f,b]=(0,s.useState)(""),[y,j]=(0,s.useState)(!1),[w,N]=(0,s.useState)(!1),v=(0,s.useRef)(!1),k=(0,s.useCallback)(async e=>{if(!v.current){v.current=!0;try{let t=localStorage.getItem("token"),a=await fetch("".concat(g.eo,"/api/clients/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}}),l=await a.json();p({name:l.name,image:null}),b(function(e){if(!e||""===e.trim())return"";let t=e.trim();return t.startsWith("data:image")?t:/^[A-Za-z0-9+/=]+$/.test(t)?"data:image/jpeg;base64,".concat(t):t.startsWith("http")?t:"".concat(g.eo).concat(t.startsWith("/")?"":"/").concat(t)}(l.imageUrl))}catch(e){console.error(e)}}},[]);(0,s.useEffect)(()=>{i&&r&&k(r)},[i,r,k]);let A=async e=>{if(e.preventDefault(),!i&&!x.image)return void N(!0);let t=localStorage.getItem("token"),a=i?"".concat(g.eo,"/api/clients/").concat(r):"".concat(g.eo,"/api/clients"),l=new FormData;l.append("name",x.name),x.image&&l.append("imageUrl",x.image),(await fetch(a,{method:i?"PUT":"POST",headers:{Authorization:"Bearer ".concat(t)},body:l})).ok&&j(!0)};return(0,l.jsxs)("div",{className:"relative z-10 flex justify-center w-full",children:[(0,l.jsxs)("div",{className:"w-full max-w-2xl bg-white rounded-2xl shadow-md hover:shadow-lg transition-all p-6 md:p-8 mt-4",children:[(0,l.jsxs)(h(),{href:"/admin/clients",className:"inline-flex items-center text-blue-600 hover:text-blue-800 mb-6",children:[(0,l.jsx)(c.A,{className:"w-4 h-4 mr-2"})," Back to Client Management"]}),(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:i?"Edit Client":"Add New Client"}),(0,l.jsxs)("form",{onSubmit:A,className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client Name"}),(0,l.jsx)("input",{type:"text",name:"name",value:x.name,onChange:e=>{let{name:t,value:a}=e.target;p(e=>({...e,[t]:a}))},placeholder:"Enter client name",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-black"})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Client Logo ",!i&&(0,l.jsx)("span",{className:"text-red-500 text-xs",children:"(required)"})]}),(0,l.jsxs)("div",{className:"relative border-2 border-dashed p-6 rounded-xl bg-gray-50 text-center hover:border-blue-400 transition-all",children:[f?(0,l.jsx)("img",{src:f,className:"mx-auto max-h-40 rounded-lg shadow-sm object-cover border"}):(0,l.jsx)(o.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,l.jsx)("label",{htmlFor:"image",className:"cursor-pointer text-sm text-gray-600 hover:text-blue-600 mt-4 block",children:i?"Change Logo":"Choose Logo"}),(0,l.jsx)("input",{id:"image",name:"image",type:"file",accept:"image/*",onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];a&&(p(e=>({...e,image:a})),b(URL.createObjectURL(a)))},className:"absolute inset-0 opacity-0 cursor-pointer"})]})]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-3 pt-6",children:[(0,l.jsx)(h(),{href:"/admin/clients",className:"px-5 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all",children:"Cancel"}),(0,l.jsx)("button",{type:"submit",className:"px-5 py-2 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 hover:scale-105 transition-all",children:i?"Update Client":"Add Client"})]})]})]}),y&&(0,l.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black/60 z-[9999] animate-fadeIn",children:(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-6 max-w-md w-full text-center animate-scaleIn",children:[(0,l.jsx)(d.A,{className:"w-14 h-14 text-green-500 mx-auto mb-3"}),(0,l.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:i?"Client Updated!":"Client Added!"}),(0,l.jsx)("button",{onClick:()=>{j(!1),window.location.href="/admin/clients"},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"OK"})]})}),w&&(0,l.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black/60 z-[9999] animate-fadeIn",children:(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-6 max-w-md w-full text-center animate-scaleIn",children:[(0,l.jsx)(m.A,{className:"w-14 h-14 text-red-500 mx-auto mb-3"}),(0,l.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Logo is required"}),(0,l.jsx)("button",{onClick:()=>N(!1),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"OK"})]})})]})}function f(){let[e,t]=(0,s.useState)(null),[a,c]=(0,s.useState)(!0),{logout:o}=(0,n.A)();return((0,s.useEffect)(()=>{let e=localStorage.getItem("token"),a=localStorage.getItem("user");if(!e){window.location.href="/login";return}a&&t(JSON.parse(a))},[]),e)?(0,l.jsxs)("div",{className:"min-h-screen bg-slate-100 flex md:flex-row flex-col",children:[(0,l.jsx)(r.A,{sidebarOpen:a,onToggle:c}),(0,l.jsxs)("div",{className:"flex-1 flex flex-col ml-0 md:ml-[260px] transition-all duration-300",children:[(0,l.jsx)(i.A,{title:"Client Form",user:e,onLogout:o,sidebarOpen:a}),(0,l.jsx)("main",{className:"relative flex-1 bg-gray-50 pt-[100px] px-4 md:px-8",children:(0,l.jsx)(s.Suspense,{children:(0,l.jsx)(p,{user:e,sidebarOpen:a,handleLogout:o})})})]})]}):(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."})}if("undefined"!=typeof document){let e=document.createElement("style");e.textContent="\n@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }\n@keyframes scaleIn { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }\n.animate-fadeIn { animation: fadeIn 0.25s ease-out; }\n.animate-scaleIn { animation: scaleIn 0.25s ease-out; }\n",document.head.appendChild(e)}},5626:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(1847).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])}},e=>{e.O(0,[619,25,730,441,493,358],()=>e(e.s=3044)),_N_E=e.O()}]);