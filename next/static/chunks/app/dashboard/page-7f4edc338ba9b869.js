(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[486],{3884:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>f});var a=t(5155),l=t(2115),r=t(9497),n=t(4329),c=t(5820),i=t(3270),d=t(1847);let m=(0,d.A)("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);var h=t(6613);let x=(0,d.A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),o=(0,d.A)("file-plus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]),g=(0,d.A)("user-cog",[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),u=(0,d.A)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var p=t(6485),y=t(373);function f(){let[e,s]=(0,l.useState)(null),[t,d]=(0,l.useState)(!0),[f,j]=(0,l.useState)(0),[w,v]=(0,l.useState)(0),[N,b]=(0,l.useState)(0),[k,A]=(0,l.useState)([]),[M,D]=(0,l.useState)(new Set),[S,C]=(0,l.useState)(null),{logout:E}=(0,r.A)();return((0,l.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("user");if(!e){window.location.href="/login";return}t&&s(JSON.parse(t))},[]),(0,l.useEffect)(()=>{(async()=>{try{let[e,s,t,a]=await Promise.all([fetch("".concat(y.eo,"/api/services")),fetch("".concat(y.eo,"/api/clients")),fetch("".concat(y.eo,"/api/achievements")),fetch("".concat(y.eo,"/api/contact-messages"),{headers:{Accept:"*/*",Authorization:"Bearer "+localStorage.getItem("token")}})]),l=e.ok?await e.json():[],r=s.ok?await s.json():[],n=t.ok?await t.json():[],c=a.ok?await a.json():[];j(Array.isArray(l)?l.length:0),v(Array.isArray(r)?r.length:0),b(Array.isArray(n)?n.length:0);let i=new Date;i.setDate(i.getDate()-30);let d=Array.isArray(c)?c.filter(e=>new Date(e.createdAt)>=i).sort((e,s)=>new Date(s.createdAt).getTime()-new Date(e.createdAt).getTime()):[];A(d)}catch(e){console.error("Error fetching counts:",e)}})()},[]),(0,l.useEffect)(()=>{let e=()=>{window.innerWidth>=768?d(!0):d(!1)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e)?(0,a.jsxs)("div",{className:"bg-slate-100 flex flex-col md:flex-row min-h-screen",children:[(0,a.jsx)(n.A,{sidebarOpen:t,onToggle:d}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col relative transition-all duration-300",children:[(0,a.jsx)(c.A,{title:"Dashboard",user:e,onLogout:()=>E(),sidebarOpen:t,onToggle:d}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto pt-[72px] pb-6 px-4 sm:px-6 transition-all duration-300 ".concat(t?"md:ml-72":"md:ml-24"),children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[(0,a.jsxs)("div",{className:"bg-white shadow rounded-xl px-6 py-5",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Welcome back, Admin!"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"You have successfully logged in to PT Dian Graha Elektrika dashboard."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border p-5",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-blue-100 text-blue-600",children:(0,a.jsx)(i.A,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Total Services"}),(0,a.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:f})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border p-5",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-green-100 text-green-600",children:(0,a.jsx)(m,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Total Clients"}),(0,a.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:w})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border p-5",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-yellow-100 text-yellow-600",children:(0,a.jsx)(h.A,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Total Achievements"}),(0,a.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:N})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-5",children:"Management Sections"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("a",{href:"/admin/clients",className:"p-6 bg-white border rounded-xl text-center shadow-sm hover:shadow-md hover:scale-105 transition-all flex flex-col items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mb-3",children:(0,a.jsx)(x,{className:"w-5 h-5"})}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Client Management"})]}),(0,a.jsxs)("a",{href:"/admin/services",className:"p-6 bg-white border rounded-xl text-center shadow-sm hover:shadow-md hover:scale-105 transition-all flex flex-col items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-green-100 text-green-600 rounded-full flex items-center justify-center mb-3",children:(0,a.jsx)(o,{className:"w-5 h-5"})}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Service Management"})]}),(0,a.jsxs)("a",{href:"/admin/achievements",className:"p-6 bg-white border rounded-xl text-center shadow-sm hover:shadow-md hover:scale-105 transition-all flex flex-col items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center mb-3",children:(0,a.jsx)(g,{className:"w-5 h-5"})}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Achievement Management"}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1 text-center",children:"Manage your company achievements and awards"})]}),(0,a.jsxs)("a",{href:"/admin/contacts",className:"p-6 bg-white border rounded-xl text-center shadow-sm hover:shadow-md hover:scale-105 transition-all flex flex-col items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gray-100 text-gray-600 rounded-full flex items-center justify-center mb-3",children:(0,a.jsx)(u,{className:"w-5 h-5"})}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Contact Management"}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1 text-center",children:"Manage your contact messages and inquiries"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-xl p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Contact Messages (Last 30 Days)"}),0===k.length?(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"No messages in the last 30 days."}):(0,a.jsx)("div",{className:"flex flex-col gap-4",children:k.map(e=>(0,a.jsxs)("div",{className:"w-full p-5 border rounded-xl shadow-sm cursor-pointer transition-all ".concat(M.has(e.id)?"bg-gray-50 border-gray-200":"bg-blue-50 border-blue-200"),onClick:()=>{var s;return s=e.id,C(e=>e===s?null:s),void(!M.has(s)&&D(e=>new Set(e).add(s)))},children:[(0,a.jsxs)("div",{className:"flex justify-between items-start gap-3 flex-wrap",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 text-sm truncate",children:e.fullName}),(0,a.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.email}),e.message&&S!==e.id&&(0,a.jsx)("div",{className:"mt-2 max-w-full overflow-hidden",children:(0,a.jsx)("p",{className:"text-sm text-gray-700 text-justify overflow-hidden text-ellipsis whitespace-nowrap block",children:e.message.replace(/\n/g," ")})})]}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-gray-500 whitespace-nowrap flex-shrink-0 mt-2 sm:mt-0",children:[(0,a.jsx)(p.A,{className:"w-3 h-3 mr-1"}),new Date(e.createdAt).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"})]})]}),S===e.id&&(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200 space-y-2 text-gray-700 text-justify",children:[e.phoneNumber&&(0,a.jsxs)("p",{className:"text-sm",children:["\uD83D\uDCDE Phone: ",e.phoneNumber]}),e.companyName&&(0,a.jsxs)("p",{className:"text-sm",children:["\uD83C\uDFE2 Company: ",e.companyName]}),e.interestedIn&&(0,a.jsxs)("p",{className:"text-sm",children:["\uD83D\uDCBC Interested in: ",e.interestedIn]}),e.message&&(0,a.jsx)("div",{className:"bg-gray-50 p-3 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm leading-relaxed whitespace-pre-line break-words text-justify",children:e.message})})]})]},e.id))})]})]})})]})]}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-lg",children:"Loading..."})})}},6485:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},6904:(e,s,t)=>{Promise.resolve().then(t.bind(t,3884))}},e=>{e.O(0,[619,25,730,441,493,358],()=>e(e.s=6904)),_N_E=e.O()}]);